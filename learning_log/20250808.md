# ì°¸ì¡° ìë£Œí˜• ìºìŠ¤íŒ… (Reference Type Casting)
- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(OOP)ì—ì„œ ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜
## 1. ì •ì˜

Javaì—ì„œ ìë£Œí˜•ì€ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

- **ê¸°ë³¸ ìë£Œí˜• (Primitive Type)** : `int`, `double`, `char`, `float`, `long`

- **ì°¸ì¡° ìë£Œí˜• (Reference Type)** : ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ë¡œ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ëœ ê°ì²´

ì°¸ì¡° ìë£Œí˜• ìºìŠ¤íŒ…ì´ë€? **ê°ì²´ì˜ ìë£Œí˜•ì„ ë³€í™˜í•˜ëŠ” ì‘ì—…**ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- int -> double / int -> longìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì€ í˜•ë³€í™˜(conversion)ì´ë¼ê³  í–ˆì—ˆë‹¤.
### ê°ì²´ ìƒì„± ì˜ˆì œ
```java
A a = new A(); // (O)
A a = new B(); // (ì—…ìºìŠ¤íŒ…, ì•”ì‹œì  ë³€í™˜)
```
## 2. ìºìŠ¤íŒ… ì¢…ë¥˜

### 1) ì—…ìºìŠ¤íŒ… (Upcasting)

- í•˜ìœ„ í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ë¥¼ **ìƒìœ„ í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ë³€í™˜** (ex. Parent <- Child)

- ì•”ì‹œì ìœ¼ë¡œ ì´ë£¨ì–´ì§ (ëª…ì‹œì  ìºìŠ¤íŒ… ë¶ˆí•„ìš”)

### 2) ë‹¤ìš´ìºìŠ¤íŒ… (Downcasting)

- ìƒìœ„ í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ë¥¼ **í•˜ìœ„ í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ë³€í™˜** (ex. Parent -> Child)

- ëª…ì‹œì ìœ¼ë¡œ ì´ë£¨ì–´ì§ (í´ë˜ìŠ¤ëª…) ê°ì²´ëª…
### ì—…ìºìŠ¤íŒ…ê³¼ ë‹¤ìš´ìºìŠ¤íŒ…ì˜ í™œìš©
- ìºìŠ¤íŒ…ì€ ë‹¤í˜•ì„±ì„ êµ¬í˜„í•  ë•Œ ì‚¬ìš©. ìƒìœ„ í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ê°ì²´ë¥¼ ì²˜ë¦¬í•˜ë©´ì„œë„ 
íŠ¹ì • ìƒí™©ì—ì„œëŠ” í•˜ìœ„ í´ë˜ìŠ¤ì˜ ê³ ìœ ê¸°ëŠ¥ì„ ì‚¬ìš© ê°€ëŠ¥

### âš ï¸ `instanceof` ì—°ì‚°ì(Operator) í™œìš©
```java
Ex)
1 + 1 = 2 ì—ì„œ +ê°€ ì—°ì‚°ì / = ëŒ€ì… ì—°ì‚°ìì¸ ê²ƒì²˜ëŸ¼,
ê°ì²´ëª… instanceof í´ë˜ìŠ¤ëª… -> return true ë˜ëŠ” false 
```
## 3. ê¸°ë³¸ ì½”ë“œ ì˜ˆì œ

### ğŸ“Œ Animal í´ë˜ìŠ¤ë¥¼ í™œìš©í•œ ì—…ìºìŠ¤íŒ… & ë‹¤ìš´ìºìŠ¤íŒ…

**1. Animal.java**

package ch15_casting.animals;
```java
public class Animal {
    public void makeSound() {
        System.out.print("ìš¸ìŒ ì†Œë¦¬ : ");
    }
}
```
**2. Dog.java**
```java
package ch15_casting.animals;

public class Dog extends Animal {
    @Override
    public void makeSound() {
        super.makeSound();
        System.out.println("ë©ë©");
    }

    public void fetch() {
        System.out.println("ê°•ì•„ì§€ê°€ ê³µì„ ë¬¼ì–´ì˜µë‹ˆë‹¤.");
    }
}
```
**3. Main.java**
```java
package ch15_casting.animals;

public class Main {
    public static void main(String[] args) {
        Dog dog1 = new Dog();
        dog1.makeSound();  // "ìš¸ìŒ ì†Œë¦¬ : ë©ë©"
        dog1.fetch();  // "ê°•ì•„ì§€ê°€ ê³µì„ ë¬¼ì–´ì˜µë‹ˆë‹¤."

        Animal animal1 = dog1;  // ì—…ìºìŠ¤íŒ…
        animal1.makeSound();  // "ìš¸ìŒ ì†Œë¦¬ : ë©ë©"

        // ë‹¤ìš´ìºìŠ¤íŒ…
        if (animal1 instanceof Dog) {
            Dog dog2 = (Dog) animal1;
            dog2.fetch(); // "ê°•ì•„ì§€ê°€ ê³µì„ ë¬¼ì–´ì˜µë‹ˆë‹¤."
        }

        // ì˜ëª»ëœ ë‹¤ìš´ìºìŠ¤íŒ… ì˜ˆì œ
        Animal animal3 = new Animal();
        if (animal3 instanceof Dog) {
            Dog dog3 = (Dog) animal3; // ì‹¤í–‰ ì‹œ ì˜¤ë¥˜ ë°œìƒ
        } else {
            System.out.println("ë¶ˆê°€ëŠ¥í•œ ë‹¤ìš´ìºìŠ¤íŒ…ì…ë‹ˆë‹¤.");
        }
    }
}
```
## 4. ì‹¬í™” ì½”ë“œ ì˜ˆì œ: ì „ìê¸°ê¸° ì¤‘ì•™ ì œì–´ ì‹œìŠ¤í…œ

### ğŸ“Œ Power ì¸í„°í˜ì´ìŠ¤ í™œìš©

**1. Power.java**
```java
package ch15_casting.centralcontrol;

public interface Power {
    void on();
    void off();
}
```
**2. Computer.java**
```java
package ch15_casting.centralcontrol;

public class Computer implements Power {
    @Override
    public void on() {
        System.out.println("ì»´í“¨í„°ì˜ ì „ì›ì„ ì¼­ë‹ˆë‹¤.");
    }   

    @Override
    public void off() {
        System.out.println("ì»´í“¨í„°ì˜ ì „ì›ì„ ë•ë‹ˆë‹¤.");
    }

    public void compute() {
        System.out.println("ì»´í“¨í„°ê°€ ê³„ì‚°í•©ë‹ˆë‹¤.");
    }
}
```

**3. LED.java**
```java
package ch15_casting.centralcontrol;

public class LED implements Power {
    @Override
    public void on() {
    System.out.println("LED ë¶ˆì„ ì¼­ë‹ˆë‹¤.");
    }

    @Override
    public void off() {
        System.out.println("LED ë¶ˆì„ ë•ë‹ˆë‹¤.");
    }
}
```
**4. CentralControl.java**
```java
package ch15_casting.centralcontrol;

public class CentralControl {
    private Power[] devices;

    public CentralControl(Power[] devices) {
        this.devices = devices;
    }

    public void addDevice(Power device) {
        for (int i = 0; i < devices.length; i++) {
            if (devices[i] == null) {
                devices[i] = device;
                break;
            }
        }
    }

    public void powerOn() {
        for (Power device : devices) {
            if (device != null) device.on();
        }
    }

    public void powerOff() {
        for (Power device : devices) {
            if (device != null) device.off();
        }
    }
}
```

**5. Main.java**
```java
package ch15_casting.centralcontrol;

public class Main {
    public static void main(String[] args) {
        Computer computer = new Computer();
        LED led = new LED();

        CentralControl control = new CentralControl(new Power[5]);
        control.addDevice(computer);
        control.addDevice(led);

        control.powerOn();
        // ì¶œë ¥: "ì»´í“¨í„°ì˜ ì „ì›ì„ ì¼­ë‹ˆë‹¤."
        //       "LED ë¶ˆì„ ì¼­ë‹ˆë‹¤."

        control.powerOff();
        // ì¶œë ¥: "ì»´í“¨í„°ì˜ ì „ì›ì„ ë•ë‹ˆë‹¤."
        //       "LED ë¶ˆì„ ë•ë‹ˆë‹¤."
    }
}
```
## 5. ì •ë¦¬

### âœ… ì¥ì 

- ì½”ë“œ ìœ ì—°ì„±: ì—…ìºìŠ¤íŒ…ì„ í†µí•´ ë‹¤ì–‘í•œ ê°ì²´ë¥¼ í•˜ë‚˜ì˜ ìƒìœ„ í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ê´€ë¦¬ ê°€ëŠ¥

- ë‹¤í˜•ì„± êµ¬í˜„: ì˜¤ë²„ë¼ì´ë”©ê³¼ í•¨ê»˜ í™œìš©í•˜ë©´ ì½”ë“œ ì¬ì‚¬ìš©ì„± ì¦ê°€

### âŒ ë‹¨ì 

- ë‹¤ìš´ìºìŠ¤íŒ…ì˜ ìœ„í—˜ì„±: ì˜ëª»ëœ ë‹¤ìš´ìºìŠ¤íŒ… ì‹œ ClassCastException ë°œìƒ ê°€ëŠ¥

- ë³µì¡ì„± ì¦ê°€: ì½”ë“œ ê°€ë…ì„±ì´ ë‚®ì•„ì§ˆ ê°€ëŠ¥ì„±

### âš¡ í•´ê²° ë°©ë²•

- instanceof ì—°ì‚°ìë¥¼ í™œìš©í•˜ì—¬ ë‹¤ìš´ìºìŠ¤íŒ…ì˜ ì•ˆì „ì„±ì„ í™•ë³´
```java
if (object instanceof SubClass) {
    SubClass sub = (SubClass) object;
}
```